<div class="con py-5">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">ðŸŽ¬ Gestion des SÃ©ances</h2>
    <!-- Bouton Ajouter -->
    <button class="btn btn-primary d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#addSeanceModal">
      <i class="bi bi-plus-circle"></i> Ajouter
    </button>
  </div>

  <!-- Liste des sÃ©ances -->
  <div class="row g-4">
    <div class="col-md-4" *ngFor="let seance of seances">
      <div class="card shadow-sm border-0 rounded-3 h-100">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title fw-bold">
            <i class="bi bi-calendar-event me-2"></i>{{seance.nomSeance}}
          </h5>
          <p class="card-text mb-1"><i class="bi bi-clock me-2"></i><strong>Date & Heure :</strong> {{seance.dateHeure}}</p>
          <p class="card-text mb-1"><i class="bi bi-film me-2"></i><strong>Film :</strong> {{seance.film.titre}}</p>
          <p class="card-text mb-3"><i class="bi bi-building me-2"></i><strong>Salle :</strong> {{seance.salle.nom}}</p>

          <!-- Boutons -->
          <div class="mt-auto d-flex justify-content-between">
            <button class="btn btn-warning btn-sm d-flex align-items-center gap-1"
                    (click)="openEditModal(seance)"
                    data-bs-toggle="modal" data-bs-target="#editSeanceModal">
              <i class="bi bi-pencil-square"></i> Modifier
            </button>

            <button class="btn btn-danger btn-sm d-flex align-items-center gap-1" (click)="deleteSeance(seance.id)">
              <i class="bi bi-trash"></i> Supprimer
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Ajouter -->
<div class="modal fade" id="addSeanceModal" tabindex="-1" aria-labelledby="addSeanceModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content rounded-3 shadow">

      <!-- Header -->
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="addSeanceModalLabel">
          <i class="bi bi-plus-circle me-2"></i> Ajouter une SÃ©ance
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Body -->
      <div class="modal-body">
        <form (ngSubmit)="onSubmit()" #seanceForm="ngForm">

          <div class="mb-3">
            <label class="form-label" for="nomSeanceAdd">Nom de SÃ©ance</label>
            <input id="nomSeanceAdd" type="text" class="form-control"
                   [(ngModel)]="seance.nom_seance" name="nom_seance"
                   placeholder="Ex: SÃ©ance matinÃ©e" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="dateHeureAdd">Date & Heure</label>
            <input id="dateHeureAdd" type="datetime-local" class="form-control"
                   [(ngModel)]="seance.dateHeure" name="dateHeure" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="filmIdAdd">Film ID</label>
            <input id="filmIdAdd" type="number" class="form-control"
                   [(ngModel)]="seance.filmId" name="filmId"
                   placeholder="Ex: 1" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="salleIdAdd">Salle ID</label>
            <input id="salleIdAdd" type="number" class="form-control"
                   [(ngModel)]="seance.salleId" name="salleId"
                   placeholder="Ex: 3" required />
          </div>

        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="bi bi-x-circle"></i> Annuler
        </button>
        <button type="button" class="btn btn-primary"
                [disabled]="!seanceForm.form.valid"
                (click)="onSubmit()" data-bs-dismiss="modal">
          <i class="bi bi-check-circle"></i> Ajouter
        </button>
      </div>


    </div>
  </div>
</div>

<!-- Modal Modifier -->
<div class="modal fade" id="editSeanceModal" tabindex="-1" aria-labelledby="editSeanceModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content rounded-3 shadow">

      <!-- Header -->
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="editSeanceModalLabel">
          <i class="bi bi-pencil-square me-2"></i> Modifier une SÃ©ance
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Body -->
      <div class="modal-body" *ngIf="selectedSeance">
        <form #editSeanceForm="ngForm">

          <div class="mb-3">
            <label class="form-label" for="nomSeanceEdit">Nom de SÃ©ance</label>
            <input id="nomSeanceEdit" type="text" class="form-control"
                   [(ngModel)]="selectedSeance.nomSeance" name="nomSeance" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="dateHeureEdit">Date & Heure</label>
            <input id="dateHeureEdit" type="datetime-local" class="form-control"
                   [(ngModel)]="selectedSeance.dateHeure" name="dateHeure" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="filmIdEdit">Film ID</label>
            <input id="filmIdEdit" type="number" class="form-control"
                   [(ngModel)]="selectedSeance.film.idFilm" name="filmId" required />
          </div>

          <div class="mb-3">
            <label class="form-label" for="salleIdEdit">Salle ID</label>
            <input id="salleIdEdit" type="number" class="form-control"
                   [(ngModel)]="selectedSeance.salle.id" name="salleId" required />
          </div>

        </form>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="bi bi-x-circle"></i> Annuler
        </button>
        <button type="button" class="btn btn-success"
                (click)="updateSeance()" data-bs-dismiss="modal">
          <i class="bi bi-check-circle"></i> Sauvegarder
        </button>
      </div>

    </div>
  </div>
</div>
